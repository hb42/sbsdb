<!-- umgebende FORM muss die uebergeordnete component bereitstellen -->
<div [formGroup]="tagFormGroup">
  <div *ngFor="let tag of tagInput">
    <mat-form-field class="abstand">
      <mat-select [formControl]="tag.tagCtrl" [errorStateMatcher]="matcher" #tagsel>
        <mat-option *ngFor="let t of apTagTypes" [value]="t">
          {{ t.bezeichnung }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="tag.tagCtrl.invalid">{{ getErrorMessage(tag.tagCtrl) }}</mat-error>
    </mat-form-field>
    <mat-form-field class="abstand">
      <input
        matInput
        [formControl]="tag.textCtrl"
        [errorStateMatcher]="matcher"
        [sbsdbDisableControl]="tagsel.value && tagsel.value.flag === noTextFlag"
      />
      <mat-error *ngIf="tag.textCtrl.invalid">{{ getErrorMessage(tag.textCtrl) }}</mat-error>
    </mat-form-field>
    <button
      *ngIf="tag.tag"
      mat-icon-button
      title="Eintrag löschen"
      (click)="delete(tag)"
      type="button"
    >
      <mat-icon color="accent">delete_outline</mat-icon>
    </button>
    <button
      *ngIf="!tag.tag"
      mat-icon-button
      title="Eintrag hinzufügen"
      (click)="add(tag.tagCtrl.value, tag.textCtrl.value)"
      type="button"
      [disabled]="newText.invalid || newTag.invalid"
    >
      <mat-icon [color]="newText.invalid || newTag.invalid ? '' : 'primary'"
        >add_circle_outline</mat-icon
      >
    </button>
  </div>
  <mat-error *ngIf="tagFormGroup.invalid">{{ getFormErrorMessage() }}</mat-error>
</div>
